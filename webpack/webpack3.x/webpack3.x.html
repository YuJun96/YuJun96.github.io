<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端蜗牛路</title>
    <meta name="description" content="种一棵树最好的时间是十年前，其次就是现在。">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.85dcc93e.css" as="style"><link rel="preload" href="/assets/js/app.f4576a7b.js" as="script"><link rel="preload" href="/assets/js/2.3f2fb110.js" as="script"><link rel="preload" href="/assets/js/30.580b516f.js" as="script"><link rel="prefetch" href="/assets/js/10.d56f887c.js"><link rel="prefetch" href="/assets/js/11.1c185299.js"><link rel="prefetch" href="/assets/js/12.f00cb405.js"><link rel="prefetch" href="/assets/js/13.20de6a0c.js"><link rel="prefetch" href="/assets/js/14.00e500bf.js"><link rel="prefetch" href="/assets/js/15.4356e40b.js"><link rel="prefetch" href="/assets/js/16.b9290f9c.js"><link rel="prefetch" href="/assets/js/17.21ebc423.js"><link rel="prefetch" href="/assets/js/18.74b26f89.js"><link rel="prefetch" href="/assets/js/19.fe3a3972.js"><link rel="prefetch" href="/assets/js/20.28f7cc6c.js"><link rel="prefetch" href="/assets/js/21.1d041ab8.js"><link rel="prefetch" href="/assets/js/22.433deedd.js"><link rel="prefetch" href="/assets/js/23.52b0a209.js"><link rel="prefetch" href="/assets/js/24.81715a20.js"><link rel="prefetch" href="/assets/js/25.7ede3e35.js"><link rel="prefetch" href="/assets/js/26.ebb97d69.js"><link rel="prefetch" href="/assets/js/27.2ae4ae27.js"><link rel="prefetch" href="/assets/js/28.5f559a3c.js"><link rel="prefetch" href="/assets/js/29.b30bf19e.js"><link rel="prefetch" href="/assets/js/3.8b07a754.js"><link rel="prefetch" href="/assets/js/31.dfcd41cb.js"><link rel="prefetch" href="/assets/js/32.28875310.js"><link rel="prefetch" href="/assets/js/4.7a9ca92a.js"><link rel="prefetch" href="/assets/js/5.5c75fb42.js"><link rel="prefetch" href="/assets/js/6.055eb951.js"><link rel="prefetch" href="/assets/js/7.4d687b94.js"><link rel="prefetch" href="/assets/js/8.47dd0fed.js"><link rel="prefetch" href="/assets/js/9.3c6ef1c9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.85dcc93e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端蜗牛路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/golang/" class="nav-link">go</a></div><div class="nav-item"><a href="/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/javascript/" class="nav-link">javascript</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">nodejs</a></div><div class="nav-item"><a href="/libary/" class="nav-link">libary</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/webpack3.x/webpack3.x.html" class="nav-link router-link-exact-active router-link-active">webpack3.x</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpack4.x/webpack4.x.html" class="nav-link">webpack4.x</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpack-extend/webpack-extend.html" class="nav-link">webpack扩展</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/yujun96" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/golang/" class="nav-link">go</a></div><div class="nav-item"><a href="/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/javascript/" class="nav-link">javascript</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">nodejs</a></div><div class="nav-item"><a href="/libary/" class="nav-link">libary</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/webpack3.x/webpack3.x.html" class="nav-link router-link-exact-active router-link-active">webpack3.x</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpack4.x/webpack4.x.html" class="nav-link">webpack4.x</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpack-extend/webpack-extend.html" class="nav-link">webpack扩展</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/yujun96" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>webpack的学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webpack/webpack3.x/webpack3.x.html" class="active sidebar-link">webpack3.x</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#webpack-是什么" class="sidebar-link">webpack 是什么</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#为什么要学习-webpack" class="sidebar-link">为什么要学习 webpack</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#搭建开发环境" class="sidebar-link">搭建开发环境</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#进入-demo" class="sidebar-link">进入 demo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#entry-选项-入口配置" class="sidebar-link">entry 选项(入口配置)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#output-选项-出口配置" class="sidebar-link">output 选项(出口配置)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#多入口多出口配置" class="sidebar-link">多入口多出口配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#配置文件-服务和热更新" class="sidebar-link">配置文件:服务和热更新</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#设置-webpack-dev-server" class="sidebar-link">设置 webpack-dev-server</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#模块-css-打包" class="sidebar-link">模块:css 打包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#打包-css-文件" class="sidebar-link">打包 css 文件</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#style-loader" class="sidebar-link">style-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#css-loader" class="sidebar-link">css-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#loaders-配置：" class="sidebar-link">loaders 配置：</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#插件配置-html-文件的发布" class="sidebar-link">插件配置:Html 文件的发布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#打包-html-文件" class="sidebar-link">打包 HTML 文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#css-中图片的问题" class="sidebar-link">css 中图片的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#图片写入-css" class="sidebar-link">图片写入 CSS</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#file-loader-url-loader" class="sidebar-link">file-loader url-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#为什么只使用了-url-loader" class="sidebar-link">为什么只使用了 url-loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#css-分离与图片路径处" class="sidebar-link">CSS 分离与图片路径处</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#css-分离-extract-text-webpack-plugin" class="sidebar-link">CSS 分离:extract-text-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#图片路径问题：" class="sidebar-link">图片路径问题：</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#处理-html-中的图片" class="sidebar-link">处理 html 中的图片</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#如何把图片放到指定的文件夹下" class="sidebar-link">如何把图片放到指定的文件夹下</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#如何解决图片打包问题" class="sidebar-link">如何解决图片打包问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#sass-文件的打包和分离" class="sidebar-link">SASS 文件的打包和分离</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#安装打包需要的-loader" class="sidebar-link">安装打包需要的 loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#自动处理-css3-前缀属性" class="sidebar-link">自动处理 css3 前缀属性</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#消除未使用的-css" class="sidebar-link">消除未使用的 CSS</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#给-webpack-增加-babel-支持" class="sidebar-link">给 webpack 增加 babel 支持</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#env：" class="sidebar-link">ENV：</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#webpack-模块化配置" class="sidebar-link">webpack 模块化配置</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#优雅打包第三方类库" class="sidebar-link">优雅打包第三方类库</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#watch-的正确使用方法" class="sidebar-link">watch 的正确使用方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#watch-的配置" class="sidebar-link">watch 的配置</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#bannerplugin-插件" class="sidebar-link">BannerPlugin 插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#webpack-优化黑技能" class="sidebar-link">webpack 优化黑技能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#抽离第三方库" class="sidebar-link">抽离第三方库</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#静态资源集中输出" class="sidebar-link">静态资源集中输出</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#插件安装" class="sidebar-link">插件安装</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#引入插件" class="sidebar-link">引入插件</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#配置插件" class="sidebar-link">配置插件</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack3.x/webpack3.x.html#说说热更新" class="sidebar-link">说说热更新</a></li></ul></li></ul></li><li><a href="/webpack/webpack4.x/webpack4.x.html" class="sidebar-link">webpack4.x</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack学习心得"><a href="#webpack学习心得" aria-hidden="true" class="header-anchor">#</a> <center><a href="https://webpack.github.io" target="_blank" rel="noopener noreferrer">webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>学习心得 </center></h1> <h2 id="webpack-是什么"><a href="#webpack-是什么" aria-hidden="true" class="header-anchor">#</a> <div id="mark1"></div> webpack 是什么</h2> <p>  webpack 是一个模块打包工具，在开发中，各种各样的资源都可以认为是一种独特的模块资源，比如 css，js，png，json 等。而我们通过 webpack，可以将这些资源打包压缩在指定的文件中，需要注意的是，webpack 本身是支持 js 资源的，但我们可以通过 loader 加载器，来打包除了 js 之外的资源。</p> <h2 id="为什么要学习-webpack"><a href="#为什么要学习-webpack" aria-hidden="true" class="header-anchor">#</a> <div id="mark2"></div>为什么要学习 webpack</h2> <p>  随着大前端的来临，传统的 MVC 架构中的前端只是一个会做交互和静态页的切图仔，但随着 WEB 架构的变迁，出于项目日益复杂和业务扩展，MV*架构逐渐占领了 WEB 的光环，其中三大剑客便是 Angular,React 和 Vue，在使用这些 js 框架开始时，出于代码可维护性的角度出发，不会再像以往那样使用标签引入的方式，而是采用了一种模块的方式去开发，webpack 是其中典型的代表。</p> <h2 id="搭建开发环境"><a href="#搭建开发环境" aria-hidden="true" class="header-anchor">#</a> <div id="mark3"></div>搭建开发环境</h2> <blockquote><p>1.安装<a href="https://nodejs.org/en" target="_blank" rel="noopener noreferrer">node<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在 window 的搜索框输入 cmd，输入如下命令，node -V npm -V 出现版本号就代表 node 安装成功。</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>node -v
8.2.1
npm -v
6.2.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>2.全局安装 webpack <font color="red">(建议不要全局安装，避免与后面项目中 webpack 的版本产生冲突)</font></p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install webpack -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>webpack -v
3.6.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>3.创建一个文件夹,建立两个目录 dist、src 接着<code>npm init -y</code>初始化项目</p></blockquote> <blockquote><p>4.安装 webpack  <code>npm install webpack -D</code>将插件装到开发环境。</p></blockquote> <h2 id="进入-demo"><a href="#进入-demo" aria-hidden="true" class="header-anchor">#</a> <div id="mark4"></div>进入 demo</h2> <blockquote><p>1.在 src 下创建一个 entry.js,dist 目录下创建一个 index.html 文件 2.在 src 下建立一个 entry.js 文件
3`在根目录下创建一个 webpack.config.js 的文件</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  // 入口文件设置
  entry:{},
  // 出口文件设置
  output:{},
  // 用来处理css，img等模块
  module:{},
  // 一些第三方的插件
  plugins:[],
  //配置webpack开发服务功能
  devServer:{}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>entry：配置入口文件的地址，可以是单一入口，也可以是多入口。</li> <li>output：配置出口文件的地址，在 webpack2.X 版本后，支持多出口配置。</li> <li>module：配置模块，主要是解析 CSS 和图片转换压缩等功能。</li> <li>plugins：配置插件,根据你的需要配置不同功能的插件。</li> <li>devServer：配置开发服务功能。</li></ul> <h3 id="entry-选项-入口配置"><a href="#entry-选项-入口配置" aria-hidden="true" class="header-anchor">#</a> <div id="mark4-1"></div>entry 选项(入口配置)</h3> <p>  这个选项就是配置我们要压缩的文件一般是 JavaScript 文件（当然也可以是 CSS…..）。按照上节课的代码(如果你上节课的代码还没作，那你可以返回去重新作一下)，这里要填写的是 src 目录下的 entery.js 文件。</p> <blockquote><p>wepback.config.js 中的 entry 选项</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code> //入口文件的配置项
entry:{
  //里面的main是可以随便写的
    main:'./src/main.js'
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="output-选项-出口配置"><a href="#output-选项-出口配置" aria-hidden="true" class="header-anchor">#</a> <div id="mark4-2"></div>output 选项(出口配置)</h3> <p>  出口配置是用来告诉 webpack 最后打包文件的地址和文件名称的。按照上节课的操作，应该打包到 dist 目录下。在编写出口文件时，我们需要用到一点 Node 的知识，如果你还不会 Node 也没有 关系，就简单的两句代码，你记住就可以了</p> <blockquote><p>wepback.config.js 中的 output 选项</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>//出口文件的配置项
output:{
    //打包的路径位置
    path:path.resolve(__dirname,'dist'),
    //打包的文件名称
    filename:'bundle.js'
},

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>
  如果你只这样写，是会报错的：找不到path这个东西。所以我们要在webpack.config.js的头部引入path，代码如下：
</p> <blockquote><p>01 const path= require('path')</p></blockquote> <p>下面是 webpack 的配置文档</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const path = `require`('path');
module.exports={
    //入口文件的配置项
    entry:{
        entry:'./src/entry.js'
    },
    //出口文件的配置项
    output:{
        //输出的路径，用了Node语法
        path:path.resolve(__dirname,'dist'),
        //输出的文件名称
        filename:'bundle.js'
    },
    //模块：例如解读CSS,图片如何转换，压缩
    module:{},
    //插件，用于生产模版和各项功能
    plugins:[],
    //配置webpack开发服务功能
    devServer:{}
}


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在 dist/index.html 中引入 output 中 filename 这个 js，写完这个文件在命令行输入 webpack 就可以对文件进行打包。然后就可以在浏览器中看到 index.html 页面</p> <h3 id="多入口多出口配置"><a href="#多入口多出口配置" aria-hidden="true" class="header-anchor">#</a> 多入口多出口配置</h3> <p>Webpack在版本1的时候很难设置多出口文件，但是在2版本开始就变的很方便了。直接看多入口和多出口的文件配置，然后可以和单一出口对比一下，你会发现这种设置非常简单(只需改动两点配置就可以)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports={
    entry:{
        entry:'./src/entry.js'
        entry1:'./src/entry1.js'
    },
    output:{
        //输出的路径，用了Node语法
        path:path.resolve(__dirname,'dist'),
        //输出的文件名称
        filename:'[name].js'
    },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>[name]的意思是根据入口文件的名称，打包成相同的名称，有几个入口文件，就可以打包出几个文件。</p> <h2 id="配置文件-服务和热更新"><a href="#配置文件-服务和热更新" aria-hidden="true" class="header-anchor">#</a> <div id="mark5"></div>配置文件:服务和热更新</h2> <h3 id="设置-webpack-dev-server"><a href="#设置-webpack-dev-server" aria-hidden="true" class="header-anchor">#</a> 设置 webpack-dev-server</h3> <p>要执行 webpack-dev-server 是要先用 npm install</p> <p>webpack-dev-server –save-dev来进行下载的。下载好后，需要配置一下devServer。最简单的devServer配置项只有四个。先看一下代码，然后我再作解释。</p> <p>webpack.config,js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>devServer:{
    //设置基本目录结构
      contentBase:path.resolve(__dirname,&quot;dist&quot;),
    //服务器的IP地址，可以使用127.0.0.1也可以使用localhost
      host:'127.0.0.1'
    //开启服务器压缩
      compress:true,
    //设置端口号
      port:3000
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>contentBase:配置服务器基本运行路径，用于找到程序打包地址。</li> <li>host：服务运行地址，建议使用本机 IP，这里为了讲解方便，所以用 localhost。</li> <li>compress：服务器端压缩选型，一般设置为开启，如果你对服务器压缩感兴趣，可以自行学习。</li> <li>port：服务运行端口，建议不使用 80，很容易被占用，这里使用了 3000.</li></ul> <p><strong>注意</strong>：这里需要使用 npm 来进行安装 webpack-dev-server 了， 命令如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i webpack-dev-server -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置好后，你可以试着在终端中输入webpack-dev-server,如果可以执行成功，但是往往提示下面的错误（或者是无法找到内部或外部命令）。
出现下面的错误不用慌张，我们只要在package.json里配置一下scripts选项就可以执行了。</p> <p>package.json</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
&quot;scripts&quot;: {
    &quot;server&quot;:&quot;webpack-dev-server&quot;
 },

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>配置好保存后，在终端里输入 npm run server 打开服务器。然后在浏览器地址栏输入http://localhost:3000就可以看到结果了。</p> <p>支持热更新</p> <p>在 npm run server 启动后，它是有一种监控机制的（也叫 watch）。它可以监控到我们修改源码，并立即在浏览器里给我们更新。</p> <p>注意：这里只是我们的 webpack3.6 版本支持，在 3.5 版本时要支持热更新还需要一些其他的操作。因为已经有了成熟的 3.6 版本，我就不再介绍低版本的操作方法。还有一种情况。如果你都设置好了，但是不进行热更新，可能是你系统的问题，在 Linux 和 Ma 上支持良好，在 Windows 上有时会出现问题。</p> <h2 id="模块-css-打包"><a href="#模块-css-打包" aria-hidden="true" class="header-anchor">#</a> <div id="mark6"></div>模块:css 打包</h2> <p>Webpack 在生产环境中有一个重要的作用就是减少 http 的请求数，就是把多个文件打包到一个 js 里，这样请求数就可以减少好多。这节课我们就学习一个重要的知识，把我们的 CSS 文件打包。在学习 CSS 打包之前，需要先对 webpack.config.js 里的 Loaders 配置项进行了解。</p> <p><strong>Loaders</strong>
Loaders 是 Webpack 最重要的功能之一，他也是 Webpack 如此盛行的原因。通过使用不同的 Loader，Webpack 可以的脚本和工具，从而对不同的文件格式进行特定处理。</p> <p>简单的举几个 Loaders 使用例子:</p> <ul><li><p>可以把 SASS 文件的写法转换成 CSS，而不在使用其他转换工具。</p></li> <li><p>可以把 ES6 或者 ES7 的代码，转换成大多浏览器兼容的 JS 代码。</p></li> <li><p>可以把 React 中的 JSX 转换成 JavaScript 代码。
<strong>注意</strong>：所有的 Loaders 都需要在 npm 中单独进行安装，并在 webpack.config.js 里进行配置。下面我们对 Loaders 的配置型简单梳理一下。</p></li> <li><p>test：用于匹配处理文件的扩展名的表达式，这个选项是必须进行配置的；</p></li> <li><p>use：loader 名称，就是你要使用模块的名称，这个选项也必须进行配置，否则报错；</p></li> <li><p>include/exclude:手动添加必须处理的文件（文件夹）或屏蔽不需要处理的文件（文件夹）（可选）；</p></li> <li><p>query：为 loaders 提供额外的设置选项（可选）。
明白了 Loader 是什么后，下面就开始，如何打包 CSS 文件</p></li></ul> <h3 id="打包-css-文件"><a href="#打包-css-文件" aria-hidden="true" class="header-anchor">#</a> 打包 css 文件</h3> <p>要打包 CSS 你必须先要有个 CSS 文件，在/src 目录下，我们建立一个 css 文件夹，在文件夹里建立 index.css 文件。代码内容如下。
./src/css/index.css</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
body{
    background-color: red;
    color: white;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>CSS 文件建立好后，需要引入到入口文件中，才可以打包到，这里我们引入到 entry.js 中。</p> <p>/src/entery.js 中在首行加入代码：</p> <blockquote><p><code>01</code> import './css/index.css</p></blockquote> <p>CSS 和引入做好后，我们就需要使用 loader 来解析 CSS 文件了，这里我们需要两个解析用的 loader，分别是 style-loader 和 css-loader。</p> <h3 id="style-loader"><a href="#style-loader" aria-hidden="true" class="header-anchor">#</a> style-loader</h3> <p>它是用来将 css 插入到页面的 style 标签。</p> <blockquote><p><code>01.</code> npm i style-loader -D</p></blockquote> <h3 id="css-loader"><a href="#css-loader" aria-hidden="true" class="header-anchor">#</a> css-loader</h3> <p>它是用来处理 css 文件中的 url()等</p> <blockquote><p><code>01.</code> npm i css-loader -D</p></blockquote> <p>两个 loader 都下载好后我们就可以安装 loader 了</p> <h3 id="loaders-配置："><a href="#loaders-配置：" aria-hidden="true" class="header-anchor">#</a> loaders 配置：</h3> <p>修改 webpack.config.js 中 module 属性中的配置代码如下：</p> <p>webpack.config.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
module:{
    rules:[
        {
            test:/\.css$/,
            use:[
                {loader:'style-loader'},
                {loader:'css-loader'}
                ]
        }
    ]
}
注意:style-loader一定要放在css-loader的前面，不然会报错

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="插件配置-html-文件的发布"><a href="#插件配置-html-文件的发布" aria-hidden="true" class="header-anchor">#</a> <div id="mark7"></div>插件配置:Html 文件的发布</h2> <p>现在我们的项目结构是有问题的，把 index.html 直接放到了 dist 文件夹下，这肯定是不正确的，应该放到 src 目录下。前期我为了循序渐进的学习，所以把 index.html 放到了 dist 目录下。这节课我们就学习如何把 html 文件打包到我们的生产路径下。</p> <h3 id="打包-html-文件"><a href="#打包-html-文件" aria-hidden="true" class="header-anchor">#</a> 打包 HTML 文件</h3> <p>我们先把 dist 中的 html 文件剪切到 src 目录中，并去掉我们的 JS 引入代码（webpack 会自动为我们引入 JS），因为这才是我们真实工作的目录文件结构。</p> <blockquote><p><code>01.</code>:npm i html-webpack-plugin -D
<code>02.</code>:在 webpack.config.js 中进行配置</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>01.在最前面引入
const htmlPlugin = require(&quot; html-webpack-plugin&quot;)
02.
plugins:[
    new htmlPlugin({
        minifiy:{
           removeAttributeQuotes: true   //将html进行压缩，去掉html中的逗号
        },
        hash:true,  //为了开发中js有缓存效果，所以加入hash，这样可以有效避免缓存JS
        template: './src/index.html'   //打包的路径
    })
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>minify：是对 html 文件进行压缩，removeAttrubuteQuotes 是却掉属性的双引号</li> <li>hash：为了开发中 js 有缓存效果，所以加入 hash，这样可以有效避免缓存 JS</li> <li>template：是要打包的 html 模版路径和文件名称</li></ul> <p>上边的都配置完成后，我们就可以在终端中使用 webpack，进行打包。你会看到 index.html 文件已经被打包到我们的 dist 目录下了，并且自动为我们引入了路口的 JS 文件。</p> <h2 id="css-中图片的问题"><a href="#css-中图片的问题" aria-hidden="true" class="header-anchor">#</a> <div id="mark8"></div> css 中图片的问题</h2> <h3 id="图片写入-css"><a href="#图片写入-css" aria-hidden="true" class="header-anchor">#</a> 图片写入 CSS</h3> <p>你可以先在网上找一个图片如果你需要下载，也可以下载（当然你可以完全自己找一个自己喜欢的）找到图片后在 src 目录下新建一个 images 文件夹，把图片放入 images 文件夹。</p> <p>在 index.html 文件中增加一个放置 div 的标签（需要注意的是这里修改的是 src 下的 index.html 文件，不是 dist 下的，这点新手很容易弄混，要格外注意），代码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;div id=&quot;tupian&quot;&gt;&lt;/div&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编写 css 文件，把你用的图片作为背景显示。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#tupian{
   background-image: url(../images/1.png);
   width:466px;
   height:453px;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>编写完成后，我们可以试着用 webpack 去打包一下。你会发现终端中是报错的.</p> <h3 id="file-loader-url-loader"><a href="#file-loader-url-loader" aria-hidden="true" class="header-anchor">#</a> file-loader url-loader</h3> <p>上面的错误是由于缺少 loader 的解析，对 loader 其实我们并不陌生，因为前边已经学习了 CSS 打包的 loader。我们先安装两个解析图片用的 loader。</p> <p>安装 file-loader 和 url-loader</p> <blockquote><p>`01.npm i file-loader url-loader -D</p></blockquote> <p><strong>file-loader</strong>：解决引用路径的问题，拿 background 样式用 url 引入背景图来说，我们都知道，webpack 最终会将各个模块打包成一个文件，因此我们样式中的 url 路径是相对入口 html 页面的，而不是相对于原始 css 文件所在的路径的。这就会导致图片引入失败。这个问题是用 file-loader 解决的，file-loader 可以解析项目中的 url 引入（不仅限于 css），根据我们的配置，将图片拷贝到相应的路径，再根据我们的配置，修改打包后文件引用路径，使之指向正确的文件。</p> <p><strong>url-loader</strong>：如果图片较多，会发很多 http 请求，会降低页面性能。这个问题可以通过 url-loader 解决。url-loader 会将引入的图片编码，生成 dataURl。相当于把图片数据翻译成一串字符。再把这串字符打包到文件中，最终只需要引入这个文件就能访问图片了。当然，如果图片较大，编码会消耗性能。因此 url-loader 提供了一个 limit 参数，小于 limit 字节的文件会被转为 DataURl，大于 limit 的还会使用 file-loader 进行 copy。</p> <p>配置 url-loader</p> <p>我们安装好后，就可以使用这个 loader 了，记得在 loader 使用时不需要用 require 引入，在 plugins 才需要使用 require 引入。</p> <p>webpack.config.js 文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module:{
    relus:{
        test:/\.(jpg|png|gif)$/,
        use:[{
            loader:url-loader,
            options:{
               limit: 500000   //决定是否将图片压缩为base64
            }
        }]
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>test:/.(png|jpg|gif)/是匹配图片文件后缀名称。</li> <li>use：是指定使用的 loader 和 loader 的配置参数。</li> <li>limit：是把小于 500000B 的文件打成 Base64 的格式，写入 JS。
写好后就可以使用 webpack 进行打包了，这回你会发现打包很顺利的完成了。具体的 Base64 的格式，你可以查看视频中的样子。</li></ul> <h3 id="为什么只使用了-url-loader"><a href="#为什么只使用了-url-loader" aria-hidden="true" class="header-anchor">#</a> 为什么只使用了 url-loader</h3> <p>你会发现我们并没有在 webpack.config.js 中使用 file-loader，但是依然打包成功了。我们需要了解 file-loader 和 url-loader 的关系。url-loader 和 file-loader 是什么关系呢？简答地说，url-loader 封装了 file-loader。url-loader 不依赖于 file-loader，即使用 url-loader 时，只需要安装 url-loader 即可，不需要安装 file-loader，因为 url-loader 内置了 file-loader。通过上面的介绍，我们可以看到，url-loader 工作分两种情况：</p> <p>1.文件大小小于 limit 参数，url-loader 将会把文件转为 DataURL（Base64 格式）；</p> <p>2.文件大小大于 limit，url-loader 会调用 file-loader 进行处理，参数也会直接传给 file-loader。</p> <p>也就是说，其实我们只安装一个 url-loader 就可以了。但是为了以后的操作方便，我们这里就顺便安装上 file-loader。</p> <h2 id="css-分离与图片路径处"><a href="#css-分离与图片路径处" aria-hidden="true" class="header-anchor">#</a> <div id="mark9"></div>CSS 分离与图片路径处</h2> <h3 id="css-分离-extract-text-webpack-plugin"><a href="#css-分离-extract-text-webpack-plugin" aria-hidden="true" class="header-anchor">#</a> CSS 分离:extract-text-webpack-plugin</h3> <p>有些简单的交互页面中，JavasScript 页面代码会非常少，而大部分代码都在 CSS 中，这时候项目组长会要求把 CSS 单独提取出来，方便以后更改。遇到这个需求你不要惊慌，已经有大神为我们准备好了对象的插件（plugin）。</p> <p>extract-text-webpack-plugin
这个插件就可以完美的解决我们提取 CSS 的需求，但是 webpack 官方其实并不建议这样作，他们认为 CSS 就应该打包到 JavasScript 当中以减少 http 的请求数。但现实中的需求往往不是我们前端能控制的，有些需求是我们不能控制的，分离 CSS 就是这样一个既合理由不合理的需求。</p> <p><strong>安装</strong></p> <blockquote><p>`01.npm install --save-dev extract-text-webpack-plugin</p></blockquote> <p><code>02.</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>01.引入
const extraTextPlugin = require(&quot;extract-text-webpack-plugin&quot;)
02.在plugins中增加如下代码
new  extraTextPlugin('./css/index.css')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里的/css/index.css 是分离后的路径位置。这部配置完成后，包装代码：还要修改原来我们的 style-loader 和 css-loader。</p> <p>修改代码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>        rules: [
            {
              test: /\.css$/,
              use: extractTextPlugin.extract({
                fallback: &quot;style-loader&quot;,
                use: &quot;css-loader&quot;
              })
            }]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="图片路径问题："><a href="#图片路径问题：" aria-hidden="true" class="header-anchor">#</a> 图片路径问题：</h3> <p>利用 extract-text-webpack-plugin 插件很轻松的就把 CSS 文件分离了出来，但是 CSS 路径并不正确，很多小伙伴就在这里搞个几天还是没有头绪，网上也给出了很多的解决方案，我觉的最好的解决方案是使用 publicPath 解决，我也一直在用。</p> <p>publicPath：是在 webpack.config.js 文件的 output 选项中，主要作用就是处理静态文件路径的。</p> <p>在处理前，我们在 webpack.config.js 上方声明一个对象，叫 website。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
var website ={
    publicPath:&quot;http://127.0.0.1:3000/&quot;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意，这里的 IP 和端口，是你本机的 ip 或者是你 devServer 配置的 IP 和端口。</p> <p>然后在 output 选项中引用这个对象的 publicPath 属性。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//出口文件的配置项
    output:{
        //输出的路径，用了Node语法
        path:path.resolve(__dirname,'dist'),
        //输出的文件名称
        filename:'[name].js',
        publicPath:website.publicPath
    },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>配置完成后，你再使用 webpack 命令进行打包，你会发现原来的相对路径改为了绝对路径，这样来讲速度更快。</p> <h2 id="处理-html-中的图片"><a href="#处理-html-中的图片" aria-hidden="true" class="header-anchor">#</a> <div id="mark10"></div> 处理 html 中的图片</h2> <p>只有项目安装 webpack，如何打包？ 有的小伙伴在学习视频时，并没有全局安装 webpack，而是使用了项目安装。首先我要说的是，这种做法是 webpack 推崇的，webpack 并不鼓励全局安装 webpack。但是小伙伴直接在终端用 webpack 进行打包项目，他使用时会出现不是内部命令或者外部命令。</p> <p>这时候需要配置 package.json 里的 scripts 选项，我们以前的课程已经学习了配置 webpack-dev-server 命令，在这个命令下面我们再加一个 build 命令进行打包项目使用。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;scripts&quot;: {
    &quot;server&quot;: &quot;webpack-dev-server --open&quot;,
    &quot;build&quot;:&quot;webpack&quot;
  }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>配置完成后，可以在控制台输入 npm run build 进行打包。</p> <h3 id="如何把图片放到指定的文件夹下"><a href="#如何把图片放到指定的文件夹下" aria-hidden="true" class="header-anchor">#</a> 如何把图片放到指定的文件夹下</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
        test: /\.(png|jpg|gif)$/,
        use: [{
          loader: 'url-loader',
          options: {
            limit: 5000,
            outputPath: 'images/'   //将图片统一输出到image路径下
          }
        }]
      }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="如何解决图片打包问题"><a href="#如何解决图片打包问题" aria-hidden="true" class="header-anchor">#</a> 如何解决图片打包问题</h3> <blockquote><p><code>01.</code>npm i html-withimg-loader --D
<code>02.</code></p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>rules:[
    {
       test: /\.(htm|html)$/i,   //打包css中的图片问题
        use: ['html-withimg-loader']
    }
]

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>然后在终端中可以进行打包了。你会发现 images 被很好的打包了。并且路径也完全正确。</p> <h2 id="sass-文件的打包和分离"><a href="#sass-文件的打包和分离" aria-hidden="true" class="header-anchor">#</a> <div id="mark11"></div> SASS 文件的打包和分离</h2> <h3 id="安装打包需要的-loader"><a href="#安装打包需要的-loader" aria-hidden="true" class="header-anchor">#</a> 安装打包需要的 loader</h3> <blockquote><p><code>01</code>.npm i node-sass saa-loader -D</p></blockquote> <p>node-sass：因为 sass-loader 依赖于 node-sass，所以需要先安装</p> <p>编写 loader 配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rules:[
    {
        test:/\.scss/,
     use: extractTextPlugin.extract({
                use: [
                    {
                    loader: &quot;css-loader&quot;
                    },
                   {
                    loader: &quot;sass-loader&quot;
                   }
                   ],
                fallback: &quot;style-loader&quot;
            })
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="自动处理-css3-前缀属性"><a href="#自动处理-css3-前缀属性" aria-hidden="true" class="header-anchor">#</a> <div id="mark12"></div>自动处理 css3 前缀属性</h2> <p>SS3 已经成了前端的必会技能，但是你一定为那些属性需要加前缀，那些属性不需要加前缀而头疼。</p> <p>为了浏览器的兼容性，有时候我们必须加入-webkit,-ms,-o,-moz 这些前缀。目的就是让我们写的页面在每个浏览器中都可以顺利运行。</p> <blockquote><p><code>01.</code>安装两个插件 npm i postcss-loader autoprefixer -D</p></blockquote> <p>postCSS 推荐在项目根目录（和 webpack.config.js 同级），建立一个 postcss.config.js 文件。</p> <p>postcss.config.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
    plugins: [
        require('autoprefixer')
    ]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这就是对 postCSS 一个简单的配置，引入了 autoprefixer 插件。让 postCSS 拥有添加前缀的能力，它会来增加相应的 css3 属性前缀。</p> <p>编写 loader</p> <p>对 postcss.config.js 配置完成后，我们还需要编写我们的 loader 配置。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  test: /\.css$/,
  use: extractTextPlugin.extract({
    fallback: 'style-loader',
    use: [
    { loader: 'css-loader', options: { importLoaders: 1 } },
    'postcss-loader'
    ]
   })
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="消除未使用的-css"><a href="#消除未使用的-css" aria-hidden="true" class="header-anchor">#</a> <div id="mark13"></div>消除未使用的 CSS</h2> <p>在项目中有些 css 可能我们并未用到，因此需要消除那些没有被用到的 css</p> <blockquote><p><code>01.</code>安装两个包 npm i -D purifycss-webpack purify-css</p></blockquote> <blockquote><p><code>02.</code>引入 glob</p></blockquote> <p>因为我们需要同步检查 html 模板，所以我们需要引入 node 的 glob 对象使用。在 webpack.config.js 文件头部引入 glob。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const glob = require(&quot;glob&quot;)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><ol start="3"><li>const PurifyCSSPlugin = require(&quot;purifycss-webpack&quot;)</li></ol></blockquote> <blockquote><ol start="4"><li>配置 plugins</li></ol></blockquote> <p>引入完成后我们需要在 webpack.config.js 里配置 plugins</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> new PurifyCSSPlugin({
     //对html进行扫描
      paths: glob.sync(path.join(__dirname, 'src/*.html')),
      }),
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里配置了一个 paths，主要是需找 html 模板，purifycss 根据这个配置会遍历你的文件，查找哪些 css 被使用了。</p> <p><strong>注意</strong>：使用这个插件必须配合 extract-text-webpack-plugin 这个插件，</p> <h2 id="给-webpack-增加-babel-支持"><a href="#给-webpack-增加-babel-支持" aria-hidden="true" class="header-anchor">#</a> <div id="mark14"></div>给 webpack 增加 babel 支持</h2> <p>现在前端开发中大量使用 es6 甚至 es7 的语法，而一些浏览器对其支持性不太好，因此我们需要将 es6，es7 编译成 es5，进行上线。</p> <blockquote><p><code>01</code>安装：npm install --save-dev babel-core babel-loader babel-preset-es2015 babel-preset-react</p></blockquote> <blockquote><p><code>02.</code>在 webpack.config.js 中的 module 中进行配置</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>rules：[{
    test:/\.(js|jsx)$/,
      use:{
        loader:'babel-loader'
        },
     exclude:/node_modules/
}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><code>03.</code>在项目根目录新建.babelrc 文件，并把配置写到文件里</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;presets&quot;: [
    &quot;es2015&quot;,
    &quot;react&quot;
  ]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="env："><a href="#env：" aria-hidden="true" class="header-anchor">#</a> ENV：</h3> <p>现在网络上已经不流行 babel-preset-es2015，现在官方推荐使用的是 babel-preset-env,那我们为了紧跟潮流，我们在讲一下 env 的配置方法。</p> <blockquote><p><code>01.</code> npm i --save-dev babel-preset-env</p></blockquote> <p>然后修改.babelrc 里的配置文件。其实只要把之前的 es2015 换成 env 就可以了。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;presets&quot;: [
    &quot;env&quot;,
    &quot;react&quot;
  ]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="webpack-模块化配置"><a href="#webpack-模块化配置" aria-hidden="true" class="header-anchor">#</a> <div id="mark15"></div> webpack 模块化配置</h2> <p>webpack 模块</p> <p>为了让大家容易看懂，我把 webpack.config.js 中的 entry 入口文件进行模块化设置，单独拿出来制作成一个模块。</p> <p>首先在根目录，新建一个 webpack_config 文件夹，然后新建 entry_webpack.js 文件，代码如下：</p> <p>entry_webpack.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/声明entry变量
const entry ={};
//声明路径属性
entry.path={
    entry:'./src/entry.js'
}
//进行模块化
module.exports =entry;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>配置的模块化代码编写好以后，需要在 webpack.config.js 中引入，注意这里的引入只能使用 require 的方法。</p> <blockquote><p><code>01</code> const entry = require(&quot;./webpack_config/entry_webpack.js&quot;)</p></blockquote> <p>然后在入口文件部分，修改成如下代码：</p> <blockquote><p><code>02.</code> entry:entry.path</p></blockquote> <h2 id="优雅打包第三方类库"><a href="#优雅打包第三方类库" aria-hidden="true" class="header-anchor">#</a> <div id="mark16"></div>优雅打包第三方类库</h2> <p>引入 JQuery</p> <p>其实引用第三方库的方法有很多种，但是有些并不是很优雅，还有些方法会出现打包问题，技术胖在这里介绍一下自己工作中引入第三方模块的方法，我们就拿 JQuery 为例。小伙伴们要举一反三，学会后试着自己引入 Vue 试试。</p> <p>安装 JQuery</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i jquery -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用 plugin 引入
ProvidePlugin 是一个 webpack 自带的插件，Provide 的意思就是装备、提供。因为 ProvidePlugin 是 webpack 自带的插件，所以要先再 webpack.config.js 中引入 webpack。</p> <blockquote><p><code>01.</code> constc webpack = require('webpack');</p></blockquote> <p>引入成功后配置我们的 plugins 模块，代码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>plugins:[
    new webpack.ProvidePlugin({
        $:&quot;jquery&quot;
    })
]

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>配置好后，就可以在你的入口文件中使用了，而不用再次引入了。这是一种全局的引入，在实际工作中也可以很好的规范项目所使用的第三方库。</p> <h2 id="watch-的正确使用方法"><a href="#watch-的正确使用方法" aria-hidden="true" class="header-anchor">#</a> <div id="mark17"></div>watch 的正确使用方法</h2> <p>初级开发阶段，使用 webpack-dev-server 就可以充当服务器和完成打包任务，但时随着你项目的进一步完成，可能需要前后台联调或者两个前端合并代码时，就需要一个公共的服务器了。这时候我们每次保存后手动打包显然效率太低，我们希望的场景是代码发生变化后，只要保存，webpack 自动为我们进行打包。这个工具就是 watch，这节课我们把 wacht 完全学会，你会发现在开发中更加的得心应手。</p> <h3 id="watch-的配置"><a href="#watch-的配置" aria-hidden="true" class="header-anchor">#</a> watch 的配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>watchOptions:{
    //检测修改的时间，以毫秒为单位
    poll:1000,
    //防止重复保存而发生重复编译错误。这里设置的500是半秒内重复保存，不进行打包操作
    aggregateTimeout:500,
    //不监听的目录
    ignored:/node_modules/,
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这样就不用反复打包</p> <h3 id="bannerplugin-插件"><a href="#bannerplugin-插件" aria-hidden="true" class="header-anchor">#</a> BannerPlugin 插件</h3> <p>这个插件是用来在打包时，在打包后的代码上加上自己的备注</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new webpack.BannerPlugin('余俊打包后的项目')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="webpack-优化黑技能"><a href="#webpack-优化黑技能" aria-hidden="true" class="header-anchor">#</a> <div id="mark18"></div>webpack 优化黑技能</h2> <h3 id="抽离第三方库"><a href="#抽离第三方库" aria-hidden="true" class="header-anchor">#</a> 抽离第三方库</h3> <p><strong>第一步：修改入口文件</strong></p> <p>抽离的第一步是修改入口文件，把我们的 JQuery 也加入到入口文件中，看下面的代码。</p> <p>webpack.config.js</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>entry:{
        entry:'./src/entry.js',
        jquery:'jquery'
 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>第二步：引入插件</strong></p> <p>我们需要引入 optimize 优化插件，插件里边是需要配置的，具体配置项看下面的代码。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new webpack.optimize.CommonsChunkPlugin({
    //name对应入口文件中的名字，我们起的是jQuery
    name:['jquery'],
    //把文件打包到哪里，是一个路径
    filename:&quot;assets/js/[name].js&quot;,
    //最小打包的文件模块数，这里直接写2就好
    minChunks:2
}),
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>配置好后，我们就可以在控制台输入 webpack 进行打包了。你会看到我们预想的结果，jquery 和 vue 都被我们抽离出来了</p> <h2 id="静态资源集中输出"><a href="#静态资源集中输出" aria-hidden="true" class="header-anchor">#</a> 静态资源集中输出</h2> <p>工作中会有一些已经存在但在项目中没有引用的图片资源或者其他静态资源（比如设计图、开发文档），这些静态资源有可能是文档，也有可能是一些额外的图片。这些资料可能要保存在服务器。</p> <h3 id="插件安装"><a href="#插件安装" aria-hidden="true" class="header-anchor">#</a> 插件安装</h3> <blockquote><p>npm install --save-dev copy-webpack-plugin</p></blockquote> <h3 id="引入插件"><a href="#引入插件" aria-hidden="true" class="header-anchor">#</a> 引入插件</h3> <p>安装好后，需要在 webpack.config.js 文件的头部引入这个插件才可以使用。</p> <blockquote><p>const copyWebpackPlugin= require(&quot;copy-webpack-plugin&quot;)</p></blockquote> <h3 id="配置插件"><a href="#配置插件" aria-hidden="true" class="header-anchor">#</a> 配置插件</h3> <p>引入之后我们就可以在 plugins 里边进行配置插件了，我们先看下面的插件配置代码，然后再进行详细讲解。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new copyWebpackPlugin([{
        from:__dirname+'/src/public',
        to:'./public'
    }])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>from:要打包的静态资源目录地址，这里的__dirname 是指项目目录下，是 node 的一种语法，可以直接定位到本机的项目目录中。</li> <li>to:要打包到的文件夹路径，跟随 output 配置中的目录。所以不需要再自己加__dirname。</li></ul> <h3 id="说说热更新"><a href="#说说热更新" aria-hidden="true" class="header-anchor">#</a> 说说热更新</h3> <p>其实在 webpack3 中启用热加载相当的容易，只要加入 HotModuleReplacementPlugin 这个插件就可以了。</p> <blockquote><p>new webpack.HotModuleReplacementPlugin()</p></blockquote> <p>本文链接：<a href="http://yujun96.top" target="_blank" rel="noopener noreferrer">http://yujun96.top<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <center>文章到底了</center></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/webpack/webpack4.x/webpack4.x.html">
          webpack4.x
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f4576a7b.js" defer></script><script src="/assets/js/2.3f2fb110.js" defer></script><script src="/assets/js/30.580b516f.js" defer></script>
  </body>
</html>
